<main class="cardv1" id="post-<%= post.id %>" data-controller="accordion" >
  <div class="share-card">
    <div class="gradient">
      <div class="grad-and-icons">
        <div class="icons-for-grad">
          <div class="icon-container">
            <div class="icon">
              <%= link_to post_comments_path(post) do %>
              <i class="fa-regular fa-comment fa-lg" style="color: #FFFFFF;"></i>
              <% end %>
            </div>
            <div class="icon-text">
              <p class="i-1"><%= post.comments.count  %></p>
            </div>
          </div>

          <div class="icon-container">
            <div class="icon">
              <%= link_to post_likes_path(post), data:{turbo_method: :post} do %>
                <% if user_signed_in? %>
                <%# eeeeeeee %>
                  <% if Like.where(post_id: post.id, user_id: current_user.id).empty? %>
                    <i class="fa-regular fa-star fa-lg" style="color: #ffffff;"></i>
                    <% else %>
                    <i class="fa-solid fa-star fa-lg" style="color: #ffffff;"></i>
                  <% end %>
                <% else %>
                    <i class="fa-regular fa-star fa-lg" style="color: #ffffff;"></i>
                <% end %>
              <% end %>
            </div>
            <div class="icon-text">
              <p class="i-2"><%= Like.where(post_id: post).count %></p>
            </div>
          </div>

          <div class="icon-container">
            <div class="icon">
            <%= link_to post_saved_posts_path(post), data:{turbo_method: :post} do %>
              <% if user_signed_in? %>
                <% if SavedPost.where(post_id: post.id, user_id: current_user.id).empty? %>
                  <i class="fa-regular fa-bookmark fa-lg" style="color: #ffffff;"></i>
                <% else %>
                  <i class="fa-solid fa-bookmark fa-lg" style="color: #ffffff;"></i>
                <% end %>
              <% else %>
                <i class="fa-regular fa-bookmark fa-lg" style="color: #ffffff;"></i>
              <% end %>
            <% end %>

            </div>
            <div class="icon-text">
              <p class="i-3"><%= SavedPost.where(post_id: post).count %></p>
            </div>
          </div>
        </div>

        <div>
        <% user = User.find(post.user_id) %>
          <%= cl_image_tag user.photo.key, class: "profile-pic" if user.photo.key%>
        </div>

        <div class="username-top">
        <p><strong><%=  post.user.user_name %></strong></p>
        </div>

        <div>
          <%= cl_image_tag post.photo.key, class: "card-img" if post.photo.key %>
        </div>
      </div>
    </div>
      <div class="card-text">
        <div class="top-t">
        <p><strong><%=  post.user.user_name %></strong></p>
        </div>
              <div class="medium-t">
                <p><%= post.description[0...50] %> <span class="more" data-action="click->accordion#anotherAcordion">...more</span> <span data-accordion-target="hiddenText" class="d-none"><%= post.description[0...post.description.length]%></span> </p>

               <p class="d-none" data-accordion-target="hiddenTag"><strong>Category: </strong><%= post.category %> </p>
               <p class="d-none" data-accordion-target="hiddenTag"><strong>Occasion: </strong><%= post.occasion %> </p>

              </div>


                <div class="low-t">
                 <p><%= time_ago_in_words(post.created_at) %></p>
                </div>
      </div>


  </div>
</main>
